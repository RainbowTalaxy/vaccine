<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="index.css" />
<link href="https://unpkg.com/@primer/css@^16.0.0/dist/primer.css" rel="stylesheet" />
</head>
<body>
<div class="markdown-body"><h1 id="新冠疫苗指南书-后端">新冠疫苗指南书-后端</h1>
<p>端口 <code>3000</code></p>
<ul>
<li><a href="#数据库">数据库</a><ul>
<li><a href="#资讯表">资讯表</a></li>
<li><a href="#问答表">问答表</a></li></ul></li>
<li><a href="#接口">接口</a>（感叹号为小程序会用到的接口）<ul>
<li><a href="#管理员登陆">管理员登陆</a></li>
<li><a href="#资讯列表">资讯列表</a>！！！！</li>
<li><a href="#添加资讯">添加资讯</a></li>
<li><a href="#删除资讯">删除资讯</a></li>
<li><a href="#问答列表">问答列表</a>！！！！</li>
<li><a href="#添加问答">添加问答</a></li>
<li><a href="#删除问答">删除问答</a></li>
<li><a href="#获取须知">获取须知</a>！！！！</li>
<li><a href="#保存须知">保存须知</a></li>
<li><a href="#接种点列表">接种点列表</a>！！！！</li>
<li><a href="#添加接种点">添加接种点</a></li>
<li><a href="#删除接种点">删除接种点</a></li></ul></li>
</ul>
<h1 id="数据库">数据库</h1>
<p>数据库名 <code>vaccine</code></p>
<h3 id="资讯表">资讯表</h3>
<p>表名 <code>news</code></p>
<table>
<thead>
<tr>
<th id="字段" style="text-align:left;">字段</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="约束" style="text-align:left;">约束</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">n_id</td>
<td style="text-align:left;">新闻条目ID</td>
<td style="text-align:left;">bigint(10)</td>
<td style="text-align:left;">primary key auto_increment</td>
</tr>
<tr>
<td style="text-align:left;">n_title</td>
<td style="text-align:left;">新闻标题</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">n_short</td>
<td style="text-align:left;">新闻简述</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">n_date</td>
<td style="text-align:left;">新闻日期</td>
<td style="text-align:left;">date</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">n_link</td>
<td style="text-align:left;">新闻链接</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
</tbody>
</table>
<h3 id="问答表">问答表</h3>
<p>表名 <code>qna</code></p>
<table>
<thead>
<tr>
<th id="字段" style="text-align:left;">字段</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="约束" style="text-align:left;">约束</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">q_id</td>
<td style="text-align:left;">问答条目ID</td>
<td style="text-align:left;">bigint(10)</td>
<td style="text-align:left;">primary key auto_increment</td>
</tr>
<tr>
<td style="text-align:left;">q_date</td>
<td style="text-align:left;">问答日期</td>
<td style="text-align:left;">date</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">q_question</td>
<td style="text-align:left;">问答问题</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">q_answer</td>
<td style="text-align:left;">问答回答</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
</tbody>
</table>
<h3 id="接种点表">接种点表</h3>
<p>表明 <code>site</code></p>
<table>
<thead>
<tr>
<th id="字段" style="text-align:left;">字段</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="约束" style="text-align:left;">约束</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">s_id</td>
<td style="text-align:left;">接种点ID</td>
<td style="text-align:left;">bigint(10)</td>
<td style="text-align:left;">primary key auto_increment</td>
</tr>
<tr>
<td style="text-align:left;">s_name</td>
<td style="text-align:left;">站点名称</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">s_address</td>
<td style="text-align:left;">详细地址</td>
<td style="text-align:left;">text</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">s_longitude</td>
<td style="text-align:left;">坐标经度</td>
<td style="text-align:left;">double</td>
<td style="text-align:left;">not null</td>
</tr>
<tr>
<td style="text-align:left;">s_latitude</td>
<td style="text-align:left;">坐标纬度</td>
<td style="text-align:left;">double</td>
<td style="text-align:left;">not null</td>
</tr>
</tbody>
</table>
<h1 id="接口">接口</h1>
<h3 id="测试接口">测试接口</h3>
<p><code>ALL</code> /hello</p>
<h3 id="管理员登陆">管理员登陆</h3>
<p><code>POST</code> /login</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">u_name</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">root</td>
</tr>
<tr>
<td style="text-align:left;">u_pwd</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">root</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 400,
    "msg": "身份失效"
}</code></pre>
<h3 id="资讯列表">资讯列表</h3>
<p><code>GET</code> /news/list</p>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200,
    "list": [
        {
            "n_id": 2,
            // 新闻标题
            "n_title": "《新冠疫苗指南书》即将发布",
            // 新闻简述
            "n_short": "该项目将在近期发布，尽请期待！",
            // 新闻日期
            "n_date": "2021-04-14T16:00:00.000Z",
            // 新闻链接
            "n_link": "https://www.talaxy.cn"
        }
    ]
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 401,
    "msg": "获取资讯列表失败"
}</code></pre>
<h3 id="添加资讯">添加资讯</h3>
<p><code>POST</code> /news/add</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">n_title</td>
<td style="text-align:left;">新闻标题</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">News Title</td>
</tr>
<tr>
<td style="text-align:left;">n_short</td>
<td style="text-align:left;">新闻简述</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">Here is a short desription of the news.</td>
</tr>
<tr>
<td style="text-align:left;">n_date</td>
<td style="text-align:left;">新闻日期</td>
<td style="text-align:left;">Date</td>
<td style="text-align:left;">2021-4-16</td>
</tr>
<tr>
<td style="text-align:left;">n_link</td>
<td style="text-align:left;">新闻链接</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;"><a href="https://talaxy.cn">https://talaxy.cn</a></td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 402,
    "msg": "缺少资讯参数"
}</code></pre>
<h3 id="删除资讯">删除资讯</h3>
<p><code>DELETE</code> /news/remove</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">n_id</td>
<td style="text-align:left;">新闻条目ID</td>
<td style="text-align:left;">Int</td>
<td style="text-align:left;">17</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 402,
    "msg": "缺少资讯参数"
}</code></pre>
<h3 id="问答列表">问答列表</h3>
<p><code>GET</code> /qna/list</p>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200,
    "list": [
        {
            "q_id": 2,
            // 问答日期
            "q_date": "2021-04-16T16:00:00.000Z",
            // 问答问题
            "q_question": "新冠疫苗建议打吗？",
            // 问答回答
            "q_answer": "当然建议打了。"
        }
    ]
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 411,
    "msg": "获取问答列表失败"
}</code></pre>
<h3 id="添加问答">添加问答</h3>
<p><code>POST</code> /qna/add</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">q_question</td>
<td style="text-align:left;">问答问题</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">新冠疫苗建议打吗？</td>
</tr>
<tr>
<td style="text-align:left;">q_answer</td>
<td style="text-align:left;">问答回答</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">当然建议打了。</td>
</tr>
<tr>
<td style="text-align:left;">q_date</td>
<td style="text-align:left;">问答日期</td>
<td style="text-align:left;">Date</td>
<td style="text-align:left;">2021-4-17</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 412,
    "msg": "缺少问答参数"
}</code></pre>
<h3 id="删除问答">删除问答</h3>
<p><code>DELETE</code> /qna/remove</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">q_id</td>
<td style="text-align:left;">问答条目ID</td>
<td style="text-align:left;">Int</td>
<td style="text-align:left;">2</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 402,
    "msg": "缺少问答参数"
}</code></pre>
<h3 id="获取须知">获取须知</h3>
<p><code>GET</code> /notice</p>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200,
    "content": "疫苗须知！！！！！"
}</code></pre>
<h3 id="保存须知">保存须知</h3>
<p><code>PUT</code> /notice/save</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">content</td>
<td style="text-align:left;">须知内容</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">疫苗须知！！！！！</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 420,
    "msg": "缺少须知内容参数"
}</code></pre>
<h3 id="接种点列表">接种点列表</h3>
<p><code>GET</code> /site/list</p>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200,
    "list": [
        {
            "s_id": 2,
            // 接种点名称
            "s_name": "金科疫苗点",
            // 站点地址
            "s_address": "南京市江宁区弘景大道99号",
            // 坐标经度
            "s_longitude": 118.899354,
            // 坐标纬度
            "s_latitude": 31.903982
        }
    ]
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 431,
    "msg": "获取接种点列表失败"
}</code></pre>
<h3 id="添加接种点">添加接种点</h3>
<p><code>POST</code> /site/add</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">s_name</td>
<td style="text-align:left;">接种点名称</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">金科疫苗点</td>
</tr>
<tr>
<td style="text-align:left;">s_address</td>
<td style="text-align:left;">站点地址</td>
<td style="text-align:left;">String</td>
<td style="text-align:left;">南京市江宁区弘景大道99号</td>
</tr>
<tr>
<td style="text-align:left;">s_longitude</td>
<td style="text-align:left;">坐标经度</td>
<td style="text-align:left;">Double</td>
<td style="text-align:left;">118.899354</td>
</tr>
<tr>
<td style="text-align:left;">s_latitude</td>
<td style="text-align:left;">坐标纬度</td>
<td style="text-align:left;">Double</td>
<td style="text-align:left;">31.903982</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 432,
    "msg": "缺少接种点参数"
}</code></pre>
<h3 id="删除接种点">删除接种点</h3>
<p><code>DELETE</code> /site/remove</p>
<table>
<thead>
<tr>
<th id="参数" style="text-align:left;">参数</th>
<th id="名称" style="text-align:left;">名称</th>
<th id="类型" style="text-align:left;">类型</th>
<th id="参考值" style="text-align:left;">参考值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">s_id</td>
<td style="text-align:left;">接种点ID</td>
<td style="text-align:left;">Int</td>
<td style="text-align:left;">2</td>
</tr>
</tbody>
</table>
<p>成功返回参考</p>
<pre><code class="json language-json">{
    "code": 200
}</code></pre>
<p>失败返回参考</p>
<pre><code class="json language-json">{
    "code": 432,
    "msg": "缺少接种点参数"
}</code></pre>
</div></body>
</html>
